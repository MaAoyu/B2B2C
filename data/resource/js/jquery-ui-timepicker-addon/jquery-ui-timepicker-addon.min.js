(function($){$.ui.timepicker=$.ui.timepicker||{};if($.ui.timepicker.version){return}$.extend($.ui,{timepicker:{version:"1.4.1"}});var Timepicker=function(){this.regional=[];this.regional[""]={currentText:"现在",closeText:"完成",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"时间",hourText:"时",minuteText:"分",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:false};this._defaults={showButtonPanel:true,timeOnly:false,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:true,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:true,separator:" ",altFieldTimeOnly:true,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:true,timezoneList:null,addSliderAccess:false,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"};$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute"],support:{},control:null,setDefaults:function(e){extendRemove(this._defaults,e||{});return this},_newInst:function($input,opts){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults){if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue){try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}}overrides={beforeShow:function(e,t){if($.isFunction(tp_inst._defaults.evnts.beforeShow)){return tp_inst._defaults.evnts.beforeShow.call($input[0],e,t,tp_inst)}},onChangeMonthYear:function(e,t,i){tp_inst._updateDateTime(i);if($.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)){tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],e,t,i,tp_inst)}},onClose:function(e,t){if(tp_inst.timeDefined===true&&$input.val()!==""){tp_inst._updateDateTime(t)}if($.isFunction(tp_inst._defaults.evnts.onClose)){tp_inst._defaults.evnts.onClose.call($input[0],e,t,tp_inst)}}};for(i in overrides){if(overrides.hasOwnProperty(i)){fns[i]=opts[i]||null}}tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst});tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(e){return e.toUpperCase()});tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(e){return e.toUpperCase()});tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:""));if(typeof tp_inst._defaults.controlType==="string"){if(tp_inst._defaults.controlType==="slider"&&typeof $.ui.slider==="undefined"){tp_inst._defaults.controlType="select"}tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]}else{tp_inst.control=tp_inst._defaults.controlType}timezoneList=[];if(tp_inst._defaults.timezoneList!==null){timezoneList=tp_inst._defaults.timezoneList}var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&typeof timezoneList[0]!=="object"){for(;tzi<tzl;tzi++){tzv=timezoneList[tzi];timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)}}}tp_inst._defaults.timezoneList=timezoneList;tp_inst.timezone=tp_inst._defaults.timezone!==null?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):(new Date).getTimezoneOffset()*-1;tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour;tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute;tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second;tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec;tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec;tp_inst.ampm="";tp_inst.$input=$input;if(tp_inst._defaults.altField){tp_inst.$altInput=$(tp_inst._defaults.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})}if(tp_inst._defaults.minDate===0||tp_inst._defaults.minDateTime===0){tp_inst._defaults.minDate=new Date}if(tp_inst._defaults.maxDate===0||tp_inst._defaults.maxDateTime===0){tp_inst._defaults.maxDate=new Date}if(tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date){tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())}if(tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date){tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())}if(tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date){tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())}if(tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date){tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())}tp_inst.$input.bind("focus",function(){tp_inst._onFocus()});return tp_inst},_addTimePicker:function(e){var t=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(t);this._limitMinMaxDateTime(e,false);this._injectTimePicker()},_parseTime:function(e,t){if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0])}if(t||!this._defaults.timeOnly){var i=$.datepicker._get(this.inst,"dateFormat");try{var s=parseDateTimeInternal(i,this._defaults.timeFormat,e,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!s.timeObj){return false}$.extend(this,s.timeObj)}catch(a){$.timepicker.log("Error parsing the date/time string: "+a+"\ndate/time string = "+e+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+i);return false}return true}else{var n=$.datepicker.parseTime(this._defaults.timeFormat,e,this._defaults);if(!n){return false}$.extend(this,n);return true}},_injectTimePicker:function(){var e=this.inst.dpDiv,t=this.inst.settings,i=this,s="",a="",n=null,r={},l={},o=null,c=0,u=0;if(e.find("div.ui-timepicker-div").length===0&&t.showTimepicker){var m=' style="display:none;"',d='<div class="ui-timepicker-div'+(t.isRTL?" ui-timepicker-rtl":"")+'"><dl>'+'<dt class="ui_tpicker_time_label"'+(t.showTime?"":m)+">"+t.timeText+"</dt>"+'<dd class="ui_tpicker_time"'+(t.showTime?"":m)+"></dd>";for(c=0,u=this.units.length;c<u;c++){s=this.units[c];a=s.substr(0,1).toUpperCase()+s.substr(1);n=t["show"+a]!==null?t["show"+a]:this.support[s];r[s]=parseInt(t[s+"Max"]-(t[s+"Max"]-t[s+"Min"])%t["step"+a],10);l[s]=0;d+='<dt class="ui_tpicker_'+s+'_label"'+(n?"":m)+">"+t[s+"Text"]+"</dt>"+'<dd class="ui_tpicker_'+s+'"><div class="ui_tpicker_'+s+'_slider"'+(n?"":m)+"></div>";if(n&&t[s+"Grid"]>0){d+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';if(s==="hour"){for(var f=t[s+"Min"];f<=r[s];f+=parseInt(t[s+"Grid"],10)){l[s]++;var p=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:f},t);d+='<td data-for="'+s+'">'+p+"</td>"}}else{for(var h=t[s+"Min"];h<=r[s];h+=parseInt(t[s+"Grid"],10)){l[s]++;d+='<td data-for="'+s+'">'+(h<10?"0":"")+h+"</td>"}}d+="</tr></table></div>"}d+="</dd>"}var _=t.showTimezone!==null?t.showTimezone:this.support.timezone;d+='<dt class="ui_tpicker_timezone_label"'+(_?"":m)+">"+t.timezoneText+"</dt>";d+='<dd class="ui_tpicker_timezone" '+(_?"":m)+"></dd>";d+="</dl></div>";var g=$(d);if(t.timeOnly===true){g.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all">'+'<div class="ui-datepicker-title">'+t.timeOnlyTitle+"</div>"+"</div>");e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()}for(c=0,u=i.units.length;c<u;c++){s=i.units[c];a=s.substr(0,1).toUpperCase()+s.substr(1);n=t["show"+a]!==null?t["show"+a]:this.support[s];i[s+"_slider"]=i.control.create(i,g.find(".ui_tpicker_"+s+"_slider"),s,i[s],t[s+"Min"],r[s],t["step"+a]);if(n&&t[s+"Grid"]>0){o=100*l[s]*t[s+"Grid"]/(r[s]-t[s+"Min"]);g.find(".ui_tpicker_"+s+" table").css({width:o+"%",marginLeft:t.isRTL?"0":o/(-2*l[s])+"%",marginRight:t.isRTL?o/(-2*l[s])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(e){var t=$(this),a=t.html(),n=parseInt(a.replace(/[^0-9]/g),10),r=a.replace(/[^apm]/gi),l=t.data("for");if(l==="hour"){if(r.indexOf("p")!==-1&&n<12){n+=12}else{if(r.indexOf("a")!==-1&&n===12){n=0}}}i.control.value(i,i[l+"_slider"],s,n);i._onTimeChange();i._onSelectHandler()}).css({cursor:"pointer",width:100/l[s]+"%",textAlign:"center",overflow:"hidden"})}}this.timezone_select=g.find(".ui_tpicker_timezone").append("<select></select>").find("select");$.fn.append.apply(this.timezone_select,$.map(t.timezoneList,function(e,t){return $("<option />").val(typeof e==="object"?e.value:e).text(typeof e==="object"?e.label:e)}));if(typeof this.timezone!=="undefined"&&this.timezone!==null&&this.timezone!==""){var M=new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset()*-1;if(M===this.timezone){selectLocalTimezone(i)}else{this.timezone_select.val(this.timezone)}}else{if(typeof this.hour!=="undefined"&&this.hour!==null&&this.hour!==""){this.timezone_select.val(t.timezone)}else{selectLocalTimezone(i)}}this.timezone_select.change(function(){i._onTimeChange();i._onSelectHandler()});var v=e.find(".ui-datepicker-buttonpane");if(v.length){v.before(g)}else{e.append(g)}this.$timeObj=g.find(".ui_tpicker_time");if(this.inst!==null){var k=this.timeDefined;this._onTimeChange();this.timeDefined=k}if(this._defaults.addSliderAccess){var T=this._defaults.sliderAccessArgs,D=this._defaults.isRTL;T.isRTL=D;setTimeout(function(){if(g.find(".ui-slider-access").length===0){g.find(".ui-slider:visible").sliderAccess(T);var e=g.find(".ui-slider-access:eq(0)").outerWidth(true);if(e){g.find("table:visible").each(function(){var t=$(this),i=t.outerWidth(),s=t.css(D?"marginRight":"marginLeft").toString().replace("%",""),a=i-e,n=s*a/i+"%",r={width:a,marginRight:0,marginLeft:0};r[D?"marginRight":"marginLeft"]=n;t.css(r)})}}},10)}i._limitMinMaxDateTime(this.inst,true)}},_limitMinMaxDateTime:function(e,t){var i=this._defaults,s=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);if(!this._defaults.showTimepicker){return}if($.datepicker._get(e,"minDateTime")!==null&&$.datepicker._get(e,"minDateTime")!==undefined&&s){var a=$.datepicker._get(e,"minDateTime"),n=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null||this.millisecMinOriginal===null||this.microsecMinOriginal===null){this.hourMinOriginal=i.hourMin;this.minuteMinOriginal=i.minuteMin;this.secondMinOriginal=i.secondMin;this.millisecMinOriginal=i.millisecMin;this.microsecMinOriginal=i.microsecMin}if(e.settings.timeOnly||n.getTime()===s.getTime()){this._defaults.hourMin=a.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=a.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=a.getSeconds();if(this.second<=this._defaults.secondMin){this.second=this._defaults.secondMin;this._defaults.millisecMin=a.getMilliseconds();if(this.millisec<=this._defaults.millisecMin){this.millisec=this._defaults.millisecMin;this._defaults.microsecMin=a.getMicroseconds()}else{if(this.microsec<this._defaults.microsecMin){this.microsec=this._defaults.microsecMin}this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.hourMin=this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}if($.datepicker._get(e,"maxDateTime")!==null&&$.datepicker._get(e,"maxDateTime")!==undefined&&s){var r=$.datepicker._get(e,"maxDateTime"),l=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null||this.millisecMaxOriginal===null){this.hourMaxOriginal=i.hourMax;this.minuteMaxOriginal=i.minuteMax;this.secondMaxOriginal=i.secondMax;this.millisecMaxOriginal=i.millisecMax;this.microsecMaxOriginal=i.microsecMax}if(e.settings.timeOnly||l.getTime()===s.getTime()){this._defaults.hourMax=r.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=r.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMax=r.getSeconds();if(this.second>=this._defaults.secondMax){this.second=this._defaults.secondMax;this._defaults.millisecMax=r.getMilliseconds();if(this.millisec>=this._defaults.millisecMax){this.millisec=this._defaults.millisecMax;this._defaults.microsecMax=r.getMicroseconds()}else{if(this.microsec>this._defaults.microsecMax){this.microsec=this._defaults.microsecMax}this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.hourMax=this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}if(t!==undefined&&t===true){var o=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),c=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),u=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),m=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),d=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);if(this.hour_slider){this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:o});this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)}if(this.minute_slider){this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:c});this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)}if(this.second_slider){this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:u});this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)}if(this.millisec_slider){this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:m});this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)}if(this.microsec_slider){this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:d});this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec)}}},_onTimeChange:function(){if(!this._defaults.showTimepicker){return}var e=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):false,t=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):false,i=this.second_slider?this.control.value(this,this.second_slider,"second"):false,s=this.millisec_slider?this.control.value(this,this.millisec_slider,"millisec"):false,a=this.microsec_slider?this.control.value(this,this.microsec_slider,"microsec"):false,n=this.timezone_select?this.timezone_select.val():false,r=this._defaults,l=r.pickerTimeFormat||r.timeFormat,o=r.pickerTimeSuffix||r.timeSuffix;if(typeof e==="object"){e=false}if(typeof t==="object"){t=false}if(typeof i==="object"){i=false}if(typeof s==="object"){s=false}if(typeof a==="object"){a=false}if(typeof n==="object"){n=false}if(e!==false){e=parseInt(e,10)}if(t!==false){t=parseInt(t,10)}if(i!==false){i=parseInt(i,10)}if(s!==false){s=parseInt(s,10)}if(a!==false){a=parseInt(a,10)}if(n!==false){n=parseInt(n,10)}var c=r[e<12?"amNames":"pmNames"][0];var u=e!==this.hour||t!==this.minute||i!==this.second||s!==this.millisec||a!==this.microsec||this.ampm.length>0&&e<12!==($.inArray(this.ampm.toUpperCase(),this.amNames)!==-1)||this.timezone!==null&&n!==this.timezone;if(u){if(e!==false){this.hour=e}if(t!==false){this.minute=t}if(i!==false){this.second=i}if(s!==false){this.millisec=s}if(a!==false){this.microsec=a}if(n!==false){this.timezone=n}if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0])}this._limitMinMaxDateTime(this.inst,true)}if(this.support.ampm){this.ampm=c}this.formattedTime=$.datepicker.formatTime(r.timeFormat,this,r);if(this.$timeObj){if(l===r.timeFormat){this.$timeObj.text(this.formattedTime+o)}else{this.$timeObj.text($.datepicker.formatTime(l,this,r)+o)}}this.timeDefined=true;if(u){this._updateDateTime()}},_onSelectHandler:function(){var e=this._defaults.onSelect||this.inst.settings.onSelect;var t=this.$input?this.$input[0]:null;if(e&&t){e.apply(t,[this.formattedDateTime,this])}},_updateDateTime:function(e){e=this.inst||e;var t=e.currentYear>0?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(e.selectedYear,e.selectedMonth,e.selectedDay),i=$.datepicker._daylightSavingAdjust(t),s=$.datepicker._get(e,"dateFormat"),a=$.datepicker._getFormatConfig(e),n=i!==null&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(s,i===null?new Date:i,a);var r=this.formattedDate;if(e.lastVal===""){e.currentYear=e.selectedYear;e.currentMonth=e.selectedMonth;e.currentDay=e.selectedDay}if(this._defaults.timeOnly===true){r=this.formattedTime}else if(this._defaults.timeOnly!==true&&(this._defaults.alwaysSetTime||n)){r+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix}this.formattedDateTime=r;if(!this._defaults.showTimepicker){this.$input.val(this.formattedDate)}else if(this.$altInput&&this._defaults.timeOnly===false&&this._defaults.altFieldTimeOnly===true){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate)}else if(this.$altInput){this.$input.val(r);var l="",o=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,c=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;if(!this._defaults.timeOnly){if(this._defaults.altFormat){l=$.datepicker.formatDate(this._defaults.altFormat,i===null?new Date:i,a)}else{l=this.formattedDate}if(l){l+=o}}if(this._defaults.altTimeFormat){l+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+c}else{l+=this.formattedTime+c}this.$altInput.val(l)}else{this.$input.val(r)}this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var e=$.datepicker._getInst(this.$input.get(0)),t=$.datepicker._get(e,"timepicker");if(t){if(t._defaults.timeOnly&&e.input.val()!==e.lastVal){try{$.datepicker._updateDatepicker(e)}catch(i){$.timepicker.log(i)}}}}},_controls:{slider:{create:function(e,t,i,s,a,n,r){var l=e._defaults.isRTL;return t.prop("slide",null).slider({orientation:"horizontal",value:l?s*-1:s,min:l?n*-1:a,max:l?a*-1:n,step:r,slide:function(t,s){e.control.value(e,$(this),i,l?s.value*-1:s.value);e._onTimeChange()},stop:function(t,i){e._onSelectHandler()}})},options:function(e,t,i,s,a){if(e._defaults.isRTL){if(typeof s==="string"){if(s==="min"||s==="max"){if(a!==undefined){return t.slider(s,a*-1)}return Math.abs(t.slider(s))}return t.slider(s)}var n=s.min,r=s.max;s.min=s.max=null;if(n!==undefined){s.max=n*-1}if(r!==undefined){s.min=r*-1}return t.slider(s)}if(typeof s==="string"&&a!==undefined){return t.slider(s,a)}return t.slider(s)},value:function(e,t,i,s){if(e._defaults.isRTL){if(s!==undefined){return t.slider("value",s*-1)}return Math.abs(t.slider("value"))}if(s!==undefined){return t.slider("value",s)}return t.slider("value")}},select:{create:function(e,t,i,s,a,n,r){var l='<select class="ui-timepicker-select" data-unit="'+i+'" data-min="'+a+'" data-max="'+n+'" data-step="'+r+'">',o=e._defaults.pickerTimeFormat||e._defaults.timeFormat;for(var c=a;c<=n;c+=r){l+='<option value="'+c+'"'+(c===s?" selected":"")+">";if(i==="hour"){l+=$.datepicker.formatTime($.trim(o.replace(/[^ht ]/gi,"")),{hour:c},e._defaults)}else if(i==="millisec"||i==="microsec"||c>=10){l+=c}else{l+="0"+c.toString()}l+="</option>"}l+="</select>";t.children("select").remove();$(l).appendTo(t).change(function(t){e._onTimeChange();e._onSelectHandler()});return t},options:function(e,t,i,s,a){var n={},r=t.children("select");if(typeof s==="string"){if(a===undefined){return r.data(s)}n[s]=a}else{n=s}return e.control.create(e,t,r.data("unit"),r.val(),n.min||r.data("min"),n.max||r.data("max"),n.step||r.data("step"))},value:function(e,t,i,s){var a=t.children("select");if(s!==undefined){return a.val(s)}return a.val()}}}});$.fn.extend({timepicker:function(e){e=e||{};var t=Array.prototype.slice.call(arguments);if(typeof e==="object"){t[0]=$.extend(e,{timeOnly:true})}return $(this).each(function(){$.fn.datetimepicker.apply($(this),t)})},datetimepicker:function(e){e=e||{};var t=arguments;if(typeof e==="string"){if(e==="getDate"){return $.fn.datepicker.apply($(this[0]),t)}else{return this.each(function(){var e=$(this);e.datepicker.apply(e,t)})}}else{return this.each(function(){var t=$(this);t.datepicker($.timepicker._newInst(t,e)._defaults)})}}});$.datepicker.parseDateTime=function(e,t,i,s,a){var n=parseDateTimeInternal(e,t,i,s,a);if(n.timeObj){var r=n.timeObj;n.date.setHours(r.hour,r.minute,r.second,r.millisec);n.date.setMicroseconds(r.microsec)}return n.date};$.datepicker.parseTime=function(e,t,i){var s=extendRemove(extendRemove({},$.timepicker._defaults),i||{}),a=e.replace(/\'.*?\'/g,"").indexOf("Z")!==-1;var n=function(e,t,i){var s=function(e,t){var i=[];if(e){$.merge(i,e)}if(t){$.merge(i,t)}i=$.map(i,function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")});return"("+i.join("|")+")?"};var a=function(e){var t=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),i={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(t){for(var s=0;s<t.length;s++){if(i[t[s].toString().charAt(0)]===-1){i[t[s].toString().charAt(0)]=s+1}}}return i};var n="^"+e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){var t=e.length;switch(e.charAt(0).toLowerCase()){case"h":return t===1?"(\\d?\\d)":"(\\d{"+t+"})";case"m":return t===1?"(\\d?\\d)":"(\\d{"+t+"})";case"s":return t===1?"(\\d?\\d)":"(\\d{"+t+"})";case"l":return"(\\d?\\d?\\d)";case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return s(i.amNames,i.pmNames);default:return"("+e.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(e){return"\\"+e})+")?"}}).replace(/\s/g,"\\s?")+i.timeSuffix+"$",r=a(e),l="",o;o=t.match(new RegExp(n,"i"));var c={hour:0,minute:0,second:0,millisec:0,microsec:0};if(o){if(r.t!==-1){if(o[r.t]===undefined||o[r.t].length===0){l="";c.ampm=""}else{l=$.inArray(o[r.t].toUpperCase(),i.amNames)!==-1?"AM":"PM";c.ampm=i[l==="AM"?"amNames":"pmNames"][0]}}if(r.h!==-1){if(l==="AM"&&o[r.h]==="12"){c.hour=0}else{if(l==="PM"&&o[r.h]!=="12"){c.hour=parseInt(o[r.h],10)+12}else{c.hour=Number(o[r.h])}}}if(r.m!==-1){c.minute=Number(o[r.m])}if(r.s!==-1){c.second=Number(o[r.s])}if(r.l!==-1){c.millisec=Number(o[r.l])}if(r.c!==-1){c.microsec=Number(o[r.c])}if(r.z!==-1&&o[r.z]!==undefined){c.timezone=$.timepicker.timezoneOffsetNumber(o[r.z])}return c}return false};var r=function(e,t,i){try{var s=new Date("2012-01-01 "+t);if(isNaN(s.getTime())){s=new Date("2012-01-01T"+t);if(isNaN(s.getTime())){s=new Date("01/01/2012 "+t);if(isNaN(s.getTime())){throw"Unable to parse time with native Date: "+t}}}return{hour:s.getHours(),minute:s.getMinutes(),second:s.getSeconds(),millisec:s.getMilliseconds(),microsec:s.getMicroseconds(),timezone:s.getTimezoneOffset()*-1}}catch(a){try{return n(e,t,i)}catch(r){$.timepicker.log("Unable to parse \ntimeString: "+t+"\ntimeFormat: "+e)}}return false};if(typeof s.parse==="function"){return s.parse(e,t,s)}if(s.parse==="loose"){return r(e,t,s)}return n(e,t,s)};$.datepicker.formatTime=function(e,t,i){i=i||{};i=$.extend({},$.timepicker._defaults,i);t=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},t);var s=e,a=i.amNames[0],n=parseInt(t.hour,10);if(n>11){a=i.pmNames[0]}s=s.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){switch(e){case"HH":return("0"+n).slice(-2);case"H":return n;case"hh":return("0"+convert24to12(n)).slice(-2);case"h":return convert24to12(n);case"mm":return("0"+t.minute).slice(-2);case"m":return t.minute;case"ss":return("0"+t.second).slice(-2);case"s":return t.second;case"l":return("00"+t.millisec).slice(-3);case"c":return("00"+t.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(t.timezone===null?i.timezone:t.timezone,false);case"Z":return $.timepicker.timezoneOffsetString(t.timezone===null?i.timezone:t.timezone,true);case"T":return a.charAt(0).toUpperCase();case"TT":return a.toUpperCase();case"t":return a.charAt(0).toLowerCase();case"tt":return a.toLowerCase();default:return e.replace(/'/g,"")}});return s};$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function(e,t){var i=this._getInst($(e)[0]),s=this._get(i,"timepicker");if(s){s._limitMinMaxDateTime(i,true);i.inline=i.stay_open=true;this._base_selectDate(e,t);i.inline=i.stay_open=false;this._notifyChange(i);this._updateDatepicker(i)}else{this._base_selectDate(e,t)}};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(e){var t=e.input[0];if($.datepicker._curInst&&$.datepicker._curInst!==e&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==t){return}if(typeof e.stay_open!=="boolean"||e.stay_open===false){this._base_updateDatepicker(e);var i=this._get(e,"timepicker");if(i){i._addTimePicker(e)}}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i){if($.datepicker._get(t,"constrainInput")){var s=i.support.ampm,a=i._defaults.showTimezone!==null?i._defaults.showTimezone:i.support.timezone,n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=i._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,s?"APM":"").replace(/Tt/g,s?"AaPpMm":"").replace(/tT/g,s?"AaPpMm":"").replace(/T/g,s?"AP":"").replace(/tt/g,s?"apm":"").replace(/t/g,s?"ap":"")+" "+i._defaults.separator+i._defaults.timeSuffix+(a?i._defaults.timezoneList.join(""):"")+i._defaults.amNames.join("")+i._defaults.pmNames.join("")+n,l=String.fromCharCode(e.charCode===undefined?e.keyCode:e.charCode);return e.ctrlKey||(l<" "||!n||r.indexOf(l)>-1)}}return $.datepicker._base_doKeyPress(e)};$.datepicker._base_updateAlternate=$.datepicker._updateAlternate;$.datepicker._updateAlternate=function(e){var t=this._get(e,"timepicker");if(t){var i=t._defaults.altField;if(i){var s=t._defaults.altFormat||t._defaults.dateFormat,a=this._getDate(e),n=$.datepicker._getFormatConfig(e),r="",l=t._defaults.altSeparator?t._defaults.altSeparator:t._defaults.separator,o=t._defaults.altTimeSuffix?t._defaults.altTimeSuffix:t._defaults.timeSuffix,c=t._defaults.altTimeFormat!==null?t._defaults.altTimeFormat:t._defaults.timeFormat;r+=$.datepicker.formatTime(c,t,t._defaults)+o;if(!t._defaults.timeOnly&&!t._defaults.altFieldTimeOnly&&a!==null){if(t._defaults.altFormat){r=$.datepicker.formatDate(t._defaults.altFormat,a,n)+l+r}else{r=t.formattedDate+l+r}}$(i).val(r)}}else{$.datepicker._base_updateAlternate(e)}};$.datepicker._base_doKeyUp=$.datepicker._doKeyUp;$.datepicker._doKeyUp=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i){if(i._defaults.timeOnly&&t.input.val()!==t.lastVal){try{$.datepicker._updateDatepicker(t)}catch(s){$.timepicker.log(s)}}}return $.datepicker._base_doKeyUp(e)};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(e){var t=this._getInst($(e)[0]),i=t.dpDiv;this._base_gotoToday(e);var s=this._get(t,"timepicker");selectLocalTimezone(s);var a=new Date;this._setTime(t,a);$(".ui-datepicker-today",i).click()};$.datepicker._disableTimepickerDatepicker=function(e){var t=this._getInst(e);if(!t){return}var i=this._get(t,"timepicker");$(e).datepicker("getDate");if(i){t.settings.showTimepicker=false;i._defaults.showTimepicker=false;i._updateDateTime(t)}};$.datepicker._enableTimepickerDatepicker=function(e){var t=this._getInst(e);if(!t){return}var i=this._get(t,"timepicker");$(e).datepicker("getDate");if(i){t.settings.showTimepicker=true;i._defaults.showTimepicker=true;i._addTimePicker(t);i._updateDateTime(t)}};$.datepicker._setTime=function(e,t){var i=this._get(e,"timepicker");if(i){var s=i._defaults;i.hour=t?t.getHours():s.hour;i.minute=t?t.getMinutes():s.minute;i.second=t?t.getSeconds():s.second;i.millisec=t?t.getMilliseconds():s.millisec;i.microsec=t?t.getMicroseconds():s.microsec;i._limitMinMaxDateTime(e,true);i._onTimeChange();i._updateDateTime(e)}};$.datepicker._setTimeDatepicker=function(e,t,i){var s=this._getInst(e);if(!s){return}var a=this._get(s,"timepicker");if(a){this._setDateFromField(s);var n;if(t){if(typeof t==="string"){a._parseTime(t,i);n=new Date;n.setHours(a.hour,a.minute,a.second,a.millisec);n.setMicroseconds(a.microsec)}else{n=new Date(t.getTime());n.setMicroseconds(t.getMicroseconds())}if(n.toString()==="Invalid Date"){n=undefined}this._setTime(s,n)}}};$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker;$.datepicker._setDateDatepicker=function(e,t){var i=this._getInst(e);if(!i){return}if(typeof t==="string"){t=new Date(t);if(!t.getTime()){$.timepicker.log("Error creating Date object from string.")}}var s=this._get(i,"timepicker");var a;
if(t instanceof Date){a=new Date(t.getTime());a.setMicroseconds(t.getMicroseconds())}else{a=t}if(s){if(!s.support.timezone&&s._defaults.timezone===null){s.timezone=a.getTimezoneOffset()*-1}t=$.timepicker.timezoneAdjust(t,s.timezone);a=$.timepicker.timezoneAdjust(a,s.timezone)}this._updateDatepicker(i);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(e,a,true)};$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker;$.datepicker._getDateDatepicker=function(e,t){var i=this._getInst(e);if(!i){return}var s=this._get(i,"timepicker");if(s){if(i.lastVal===undefined){this._setDateFromField(i,t)}var a=this._getDate(i);if(a&&s._parseTime($(e).val(),s.timeOnly)){a.setHours(s.hour,s.minute,s.second,s.millisec);a.setMicroseconds(s.microsec);if(s.timezone!=null){if(!s.support.timezone&&s._defaults.timezone===null){s.timezone=a.getTimezoneOffset()*-1}a=$.timepicker.timezoneAdjust(a,s.timezone)}}return a}return this._base_getDateDatepicker(e,t)};$.datepicker._base_parseDate=$.datepicker.parseDate;$.datepicker.parseDate=function(e,t,i){var s;try{s=this._base_parseDate(e,t,i)}catch(a){if(a.indexOf(":")>=0){s=this._base_parseDate(e,t.substring(0,t.length-(a.length-a.indexOf(":")-2)),i);$.timepicker.log("Error parsing the date string: "+a+"\ndate string = "+t+"\ndate format = "+e)}else{throw a}}return s};$.datepicker._base_formatDate=$.datepicker._formatDate;$.datepicker._formatDate=function(e,t,i,s){var a=this._get(e,"timepicker");if(a){a._updateDateTime(e);return a.$input.val()}return this._base_formatDate(e)};$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker;$.datepicker._optionDatepicker=function(e,t,i){var s=this._getInst(e),a;if(!s){return null}var n=this._get(s,"timepicker");if(n){var r=null,l=null,o=null,c=n._defaults.evnts,u={},m;if(typeof t==="string"){if(t==="minDate"||t==="minDateTime"){r=i}else if(t==="maxDate"||t==="maxDateTime"){l=i}else if(t==="onSelect"){o=i}else if(c.hasOwnProperty(t)){if(typeof i==="undefined"){return c[t]}u[t]=i;a={}}}else if(typeof t==="object"){if(t.minDate){r=t.minDate}else if(t.minDateTime){r=t.minDateTime}else if(t.maxDate){l=t.maxDate}else if(t.maxDateTime){l=t.maxDateTime}for(m in c){if(c.hasOwnProperty(m)&&t[m]){u[m]=t[m]}}}for(m in u){if(u.hasOwnProperty(m)){c[m]=u[m];if(!a){a=$.extend({},t)}delete a[m]}}if(a&&isEmptyObject(a)){return}if(r){if(r===0){r=new Date}else{r=new Date(r)}n._defaults.minDate=r;n._defaults.minDateTime=r}else if(l){if(l===0){l=new Date}else{l=new Date(l)}n._defaults.maxDate=l;n._defaults.maxDateTime=l}else if(o){n._defaults.onSelect=o}}if(i===undefined){return this._base_optionDatepicker.call($.datepicker,e,t)}return this._base_optionDatepicker.call($.datepicker,e,a||t,i)};var isEmptyObject=function(e){var t;for(t in e){if(e.hasOwnProperty(t)){return false}}return true};var extendRemove=function(e,t){$.extend(e,t);for(var i in t){if(t[i]===null||t[i]===undefined){e[i]=t[i]}}return e};var detectSupport=function(e){var t=e.replace(/'.*?'/g,"").toLowerCase(),i=function(e,t){return e.indexOf(t)!==-1?true:false};return{hour:i(t,"h"),minute:i(t,"m"),second:i(t,"s"),millisec:i(t,"l"),microsec:i(t,"c"),timezone:i(t,"z"),ampm:i(t,"t")&&i(e,"h"),iso8601:i(e,"Z")}};var convert24to12=function(e){e%=12;if(e===0){e=12}return String(e)};var computeEffectiveSetting=function(e,t){return e&&e[t]?e[t]:$.timepicker._defaults[t]};var splitDateTime=function(e,t){var i=computeEffectiveSetting(t,"separator"),s=computeEffectiveSetting(t,"timeFormat"),a=s.split(i),n=a.length,r=e.split(i),l=r.length;if(l>1){return{dateString:r.splice(0,l-n).join(i),timeString:r.splice(0,n).join(i)}}return{dateString:e,timeString:""}};var parseDateTimeInternal=function(e,t,i,s,a){var n,r,l;r=splitDateTime(i,a);n=$.datepicker._base_parseDate(e,r.dateString,s);if(r.timeString===""){return{date:n}}l=$.datepicker.parseTime(t,r.timeString,a);if(!l){throw"Wrong time format"}return{date:n,timeObj:l}};var selectLocalTimezone=function(e,t){if(e&&e.timezone_select){var i=t||new Date;e.timezone_select.val(-i.getTimezoneOffset())}};$.timepicker=new Timepicker;$.timepicker.timezoneOffsetString=function(e,t){if(isNaN(e)||e>840||e<-720){return e}var i=e,s=i%60,a=(i-s)/60,n=t?":":"",r=(i>=0?"+":"-")+("0"+Math.abs(a)).slice(-2)+n+("0"+Math.abs(s)).slice(-2);if(r==="+00:00"){return"Z"}return r};$.timepicker.timezoneOffsetNumber=function(e){var t=e.toString().replace(":","");if(t.toUpperCase()==="Z"){return 0}if(!/^(\-|\+)\d{4}$/.test(t)){return e}return(t.substr(0,1)==="-"?-1:1)*(parseInt(t.substr(1,2),10)*60+parseInt(t.substr(3,2),10))};$.timepicker.timezoneAdjust=function(e,t){var i=$.timepicker.timezoneOffsetNumber(t);if(!isNaN(i)){e.setMinutes(e.getMinutes()+-e.getTimezoneOffset()-i)}return e};$.timepicker.timeRange=function(e,t,i){return $.timepicker.handleRange("timepicker",e,t,i)};$.timepicker.datetimeRange=function(e,t,i){$.timepicker.handleRange("datetimepicker",e,t,i)};$.timepicker.dateRange=function(e,t,i){$.timepicker.handleRange("datepicker",e,t,i)};$.timepicker.handleRange=function(e,t,i,s){s=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},s);function a(a,n){var r=t[e]("getDate"),l=i[e]("getDate"),o=a[e]("getDate");if(r!==null){var c=new Date(r.getTime()),u=new Date(r.getTime());c.setMilliseconds(c.getMilliseconds()+s.minInterval);u.setMilliseconds(u.getMilliseconds()+s.maxInterval);if(s.minInterval>0&&c>l){i[e]("setDate",c)}else if(s.maxInterval>0&&u<l){i[e]("setDate",u)}else if(r>l){n[e]("setDate",o)}}}function n(t,i,a){if(!t.val()){return}var n=t[e].call(t,"getDate");if(n!==null&&s.minInterval>0){if(a==="minDate"){n.setMilliseconds(n.getMilliseconds()+s.minInterval)}if(a==="maxDate"){n.setMilliseconds(n.getMilliseconds()-s.minInterval)}}if(n.getTime){i[e].call(i,"option",a,n)}}$.fn[e].call(t,$.extend({onClose:function(e,t){a($(this),i)},onSelect:function(e){n($(this),i,"minDate")}},s,s.start));$.fn[e].call(i,$.extend({onClose:function(e,i){a($(this),t)},onSelect:function(e){n($(this),t,"maxDate")}},s,s.end));a(t,i);n(t,i,"minDate");n(i,t,"maxDate");return $([t.get(0),i.get(0)])};$.timepicker.log=function(e){if(window.console){window.console.log(e)}};$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal};if(!Date.prototype.getMicroseconds){Date.prototype.microseconds=0;Date.prototype.getMicroseconds=function(){return this.microseconds};Date.prototype.setMicroseconds=function(e){this.setMilliseconds(this.getMilliseconds()+Math.floor(e/1e3));this.microseconds=e%1e3;return this}}$.timepicker.version="1.4.1"})(jQuery);